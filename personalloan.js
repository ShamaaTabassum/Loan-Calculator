let downArrowOutline=document.querySelector('#down-arrow-outline');
let forwardArrowOutline=document.querySelector('#forward-arrow-outline');
let tableHead=document.querySelector('#table-head');
let tableBody=document.querySelector('#table-body');
let childHead=document.querySelector('.child-head');

(forwardArrowOutline).addEventListener('click',()=>{
    tableBody.classList.remove('hidden');
    forwardArrowOutline.classList.add('hidden');
    downArrowOutline.classList.remove('hidden');
    tableHead.classList.remove('bg-white');
    tableHead.classList.remove('text-black');
    tableHead.classList.remove('border-none');
    tableHead.classList.add('bg-lightBlue');
    tableHead.classList.add('text-white');
    tableHead.classList.add('border');
});
(downArrowOutline).addEventListener('click',()=>{
    tableBody.classList.add('hidden');
    forwardArrowOutline.classList.remove('hidden');
    downArrowOutline.classList.add('hidden');
    tableHead.classList.add('bg-white');
    tableHead.classList.add('text-black');
    tableHead.classList.add('border-none');
    tableHead.classList.remove('bg-lightBlue');
    tableHead.classList.remove('text-white');
    tableHead.classList.remove('border');
})
// toggler function2
let downArrowOutline1=document.querySelector('#down-arrow-outline1');
let forwardArrowOutline1=document.querySelector('#forward-arrow-outline1');
let tableHead1=document.querySelector('#table-head1');
let tableBody1=document.querySelector('#table-body1');

(forwardArrowOutline1).addEventListener('click',()=>{
    tableBody1.classList.remove('hidden');
    forwardArrowOutline1.classList.add('hidden');
    downArrowOutline1.classList.remove('hidden');
    tableHead1.classList.remove('bg-white');
    tableHead1.classList.remove('text-black');
    tableHead1.classList.remove('border-none');
    tableHead1.classList.add('bg-lightBlue');
    tableHead1.classList.add('text-white');
    tableHead1.classList.add('border');

});
(downArrowOutline1).addEventListener('click',()=>{

    tableBody1.classList.add('hidden');
    forwardArrowOutline1.classList.remove('hidden');
    downArrowOutline1.classList.add('hidden');
    tableHead1.classList.add('bg-white');
    tableHead1.classList.add('text-black');
    tableHead1.classList.add('border-none');
    tableHead1.classList.remove('bg-lightBlue');
    tableHead1.classList.remove('text-white');
    tableHead1.classList.remove('border');
})
// toggler-function-3
let downArrowOutline2=document.querySelector('#down-arrow-outline2');
let forwardArrowOutline2=document.querySelector('#forward-arrow-outline2');
let tableHead2=document.querySelector('#table-head2');
let tableBody2=document.querySelector('#table-body2');

(forwardArrowOutline2).addEventListener('click',()=>{
    tableBody2.classList.remove('hidden');
    forwardArrowOutline2.classList.add('hidden');
    downArrowOutline2.classList.remove('hidden');
    tableHead2.classList.remove('bg-white');
    tableHead2.classList.remove('text-black');
    tableHead2.classList.remove('border-none');
    tableHead2.classList.add('bg-lightBlue');
    tableHead2.classList.add('text-white');
    tableHead2.classList.add('border');
});
(downArrowOutline2).addEventListener('click',()=>{
    tableBody2.classList.add('hidden');
    forwardArrowOutline2.classList.remove('hidden');
    downArrowOutline2.classList.add('hidden');
    tableHead2.classList.add('bg-white');
    tableHead2.classList.add('text-black');
    tableHead2.classList.add('border-none');
    tableHead2.classList.remove('bg-lightBlue');
    tableHead2.classList.remove('text-white');
    tableHead2.classList.remove('border');
})
// toggler-function-4
let downArrowOutline3=document.querySelector('#down-arrow-outline3');
let forwardArrowOutline3=document.querySelector('#forward-arrow-outline3');
let tableHead3=document.querySelector('#table-head3');
let tableBody3=document.querySelector('#table-body3');

(forwardArrowOutline3).addEventListener('click',()=>{
    tableBody3.classList.remove('hidden');
    forwardArrowOutline3.classList.add('hidden');
    downArrowOutline3.classList.remove('hidden');
    tableHead3.classList.remove('bg-white');
    tableHead3.classList.remove('text-black');
    tableHead3.classList.remove('border-none');
    tableHead3.classList.add('bg-lightBlue');
    tableHead3.classList.add('text-white');
    tableHead3.classList.add('border');
});
(downArrowOutline3).addEventListener('click',()=>{
    tableBody3.classList.add('hidden');
    forwardArrowOutline3.classList.remove('hidden');
    downArrowOutline3.classList.add('hidden');
    tableHead3.classList.add('bg-white');
    tableHead3.classList.add('text-black');
    tableHead3.classList.add('border-none');
    tableHead3.classList.remove('bg-lightBlue');
    tableHead3.classList.remove('text-white');
    tableHead3.classList.remove('border');
})
// toggler-function-5
let downArrowOutline4=document.querySelector('#down-arrow-outline4');
let forwardArrowOutline4=document.querySelector('#forward-arrow-outline4');
let tableHead4=document.querySelector('#table-head4');
let tableBody4=document.querySelector('#table-body4');

(forwardArrowOutline4).addEventListener('click',()=>{
    tableBody4.classList.remove('hidden');
    forwardArrowOutline4.classList.add('hidden');
    downArrowOutline4.classList.remove('hidden');
    tableHead4.classList.remove('bg-white');
    tableHead4.classList.remove('text-black');
    tableHead4.classList.remove('border-none');
    tableHead4.classList.add('bg-lightBlue');
    tableHead4.classList.add('text-white');
    tableHead4.classList.add('border');
});
(downArrowOutline4).addEventListener('click',()=>{
    tableBody4.classList.add('hidden');
    forwardArrowOutline4.classList.remove('hidden');
    downArrowOutline4.classList.add('hidden');
    tableHead4.classList.add('bg-white');
    tableHead4.classList.add('text-black');
    tableHead4.classList.add('border-none');
    tableHead4.classList.remove('bg-lightBlue');
    tableHead4.classList.remove('text-white');
    tableHead4.classList.remove('border');
})
// toggler-function-6
let downArrowOutline5=document.querySelector('#down-arrow-outline5');
let forwardArrowOutline5=document.querySelector('#forward-arrow-outline5');
let tableHead5=document.querySelector('#table-head5');
let tableBody5=document.querySelector('#table-body5');

(forwardArrowOutline5).addEventListener('click',()=>{
    tableBody5.classList.remove('hidden');
    forwardArrowOutline5.classList.add('hidden');
    downArrowOutline5.classList.remove('hidden');
    tableHead5.classList.remove('bg-white');
    tableHead5.classList.remove('text-black');
    tableHead5.classList.remove('border-none');
    tableHead5.classList.add('bg-lightBlue');
    tableHead5.classList.add('text-white');
    tableHead5.classList.add('border');
});
(downArrowOutline5).addEventListener('click',()=>{
    tableBody5.classList.add('hidden');
    forwardArrowOutline5.classList.remove('hidden');
    downArrowOutline5.classList.add('hidden');
    tableHead5.classList.add('bg-white');
    tableHead5.classList.add('text-black');
    tableHead5.classList.add('border-none');
    tableHead5.classList.remove('bg-lightBlue');
    tableHead5.classList.remove('text-white');
    tableHead5.classList.remove('border');
})
// toggler-function-7
let downArrowOutline6=document.querySelector('#down-arrow-outline6');
let forwardArrowOutline6=document.querySelector('#forward-arrow-outline6');
let tableHead6=document.querySelector('#table-head6');
let tableBody6=document.querySelector('#table-body6');

(forwardArrowOutline6).addEventListener('click',()=>{
    tableBody6.classList.remove('hidden');
    forwardArrowOutline6.classList.add('hidden');
    downArrowOutline6.classList.remove('hidden');
    tableHead6.classList.remove('bg-white');
    tableHead6.classList.remove('text-black');
    tableHead6.classList.remove('border-none');
    tableHead6.classList.add('bg-lightBlue');
    tableHead6.classList.add('text-white');
    tableHead6.classList.add('border');
});
(downArrowOutline6).addEventListener('click',()=>{
    tableBody6.classList.add('hidden');
    forwardArrowOutline6.classList.remove('hidden');
    downArrowOutline6.classList.add('hidden');
    tableHead6.classList.add('bg-white');
    tableHead6.classList.add('text-black');
    tableHead6.classList.add('border-none');
    tableHead6.classList.remove('bg-lightBlue');
    tableHead6.classList.remove('text-white');
    tableHead6.classList.remove('border');
})


// bar-chart



var loanAmountSlider = document.getElementById("loanAmountSlider");
var interestRateSlider = document.getElementById("interestRateSlider");
var loanTermSlider = document.getElementById("loanTermSlider");
var monthlyPaymentData=document.getElementById("monthlyPayment");
var interestRateData=document.getElementById("totalInterest");

// function format currency

function formatCurrency(amount) {
    return "$" + amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, "$&,");
  }

// Function for calculator

function calculatePersonalLoan(e) {
    // Get input values
    const loanAmount = parseFloat(
      document.getElementById("loanAmountSlider").value
    );
    const interestRate = parseFloat(
      document.getElementById("interestRateSlider").value
    );
    const loanTerm = parseFloat(document.getElementById("loanTermSlider").value);
  
    // Calculate monthly interest rate
    const monthlyRate = interestRate / 100 / 12;
  
    // Calculate total number of months
    const numMonths = loanTerm * 12;
  
    // Calculate monthly payment
    const monthlyPayment =
      (loanAmount * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -numMonths));
  
    // Calculate total interest paid
    const totalInterest = monthlyPayment * numMonths - loanAmount;
  
    // Display the results
    monthlyPaymentData.textContent =
      formatCurrency(monthlyPayment);
    interestRateData.textContent =
      formatCurrency(totalInterest);
  
    // Update the label of the slider
    const { id, value } = e.target;
    if (id === "loanAmountSlider") {
      document.getElementById("loanAmountValue").textContent = `$${value.replace(
        /\B(?=(\d{3})+(?!\d))/g,
        ","
      )}`;
    } else if (id === "interestRateSlider") {
      document.getElementById("interestRateValue").textContent = `${value}%`;
    } else {
      document.getElementById("loanTermValue").textContent = `${value} Year`;
    }
  
    // Generate yearly payment and yearly interest data
    const yearlyPaymentData = [];
    const yearlyInterestData = [];
  
    for (let i = 1; i <= loanTerm; i++) {
      const yearlyPayment = parseInt(loanAmount / loanTerm);
      const yearlyInterest = parseInt(totalInterest / loanTerm);
      yearlyPaymentData.push(yearlyPayment);
      yearlyInterestData.push(yearlyInterest);
    }
  
    // Destroy Chart
    Chart.getChart("myChart").destroy();
    // Draw graph
    drawPersonalLoanGraph(loanTerm, yearlyPaymentData, yearlyInterestData);
  }
  function drawPersonalLoanGraph(
    numberOfYears = 5,
    y1value = [5000, 5000, 5000, 5000, 5000],
    y2value = [1363, 1363, 1363, 1363, 1363]
  ) {
    let date = new Date().getFullYear();
    // var xValues = ["2023", "2025", "2026", "2017", "2018"];
    var xValues = Array.from(
      { length: numberOfYears },
      (_, index) => date + index
    );
    // var yValues1 = [500, 1000, 1500, 2000, 2500];
    var yValues1 = y1value;
    // var yValues2 = [400, 800, 1200, 1600, 2000]; //second dataset
    var yValues2 = y2value;
    // var barColors1  = ["#19D176 ", "#19D176","#19D176","#19D176","#19D176"];
    var barColors1 = Array.from(xValues, () => "#19D176");
    // var barColors2 = ["#60AFF0", "#60AFF0", "#60AFF0", "#60AFF0", "#60AFF0"];
    var barColors2 = Array.from(xValues, () => "#60AFF0");
    new Chart("myChart", {
      type: "bar",
      data: {
        labels: xValues,
        datasets: [
          {
            label: "Yearly Payment",
            backgroundColor: barColors1,
            data: yValues1,
            // label: 'Dataset 1' //optional label for this dataset
          },
          {
            label: "Yearly Interest",
            backgroundColor: barColors2,
            data: yValues2,
            // label: 'Dataset 2' //optional label for this dataset
          },
        ],
      },
      options: {
        legend: { display: true },
        title: {
          display: true,
        },
        scales: {
          y: {
            ticks: {
              // Include a dollar sign in the ticks
              callback: function (value, index, values) {
                return "$" + value;
              },
              // maxTicksLimit: 5,
              // stepSize: 3,
            },
          },
        },
      },
    });
  }
  

// Event handler for the input field change
loanAmountSlider.addEventListener('input', calculatePersonalLoan);
interestRateSlider.addEventListener('input', calculatePersonalLoan);
loanTermSlider.addEventListener('input', calculatePersonalLoan);